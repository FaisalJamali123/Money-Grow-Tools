<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1099 Tax Calculator - MoneyGrowTool</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

    <!-- Tesseract OCR -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>

    <style>
        body {
            background: #f8fafc;
        }
        .tool-card {
            max-width: 650px;
            margin: auto;
        }
    </style>
</head>

<body class="p-4">

    <h1 class="text-3xl font-bold text-center text-blue-700 mt-4 mb-6">
        1099 Tax Calculator (2025)
    </h1>

    <!-- CALCULATOR CARD -->
    <div class="tool-card bg-white shadow-lg rounded-2xl p-6">

        <!-- Income -->
        <label class="block font-semibold mb-1">Your Total 1099 Income ($)</label>
        <div class="flex gap-2">
            <input id="income" type="number" class="w-full border p-2 rounded-lg" placeholder="Example: 80000" />
            <button onclick="startVoice()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 rounded-lg">
                ðŸŽ¤
            </button>
        </div>

        <!-- Deductions -->
        <label class="block font-semibold mt-4 mb-1">Deductions ($)</label>
        <input id="deductions" type="number" class="w-full border p-2 rounded-lg" placeholder="Example: 12000" />

        <!-- Receipt OCR -->
        <div class="mt-2">
            <label class="text-sm text-gray-600">Upload receipt to auto-extract deductions:</label>
            <input id="receipt" type="file" class="mt-1" accept="image/*" onchange="scanReceipt()" />
        </div>

        <!-- State Tax Toggle -->
        <div class="mt-4">
            <label class="block font-semibold">Apply State Tax?</label>
            <select id="stateSelect" class="w-full border p-2 rounded-lg mt-1">
                <option value="">No State Tax</option>
            </select>
        </div>

        <!-- Penalty Timer -->
        <div class="mt-4">
            <label class="block font-semibold mb-1">Did you miss the filing deadline?</label>
            <select id="penaltySelect" class="w-full border p-2 rounded-lg" onchange="togglePenalty()">
                <option value="no">No</option>
                <option value="yes">Yes, start penalty timer</option>
            </select>

            <p id="penaltyCounter" class="text-red-600 font-semibold mt-2 hidden">
                IRS Penalty Growing: $<span id="penaltyAmount">0.00</span>
            </p>
        </div>

        <!-- Calculate Button -->
        <button onclick="calculateTax()"
            class="mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-semibold text-lg">
            Calculate Tax
        </button>

        <!-- RESULT -->
        <div id="resultCard" class="mt-6 bg-blue-50 p-4 rounded-xl hidden">
            <h2 class="text-xl font-bold text-blue-700 mb-2">Your Tax Summary</h2>
            <p id="resultText" class="text-gray-800 leading-relaxed"></p>
        </div>
    </div>

    <!-- EXPLAINER -->
    <div class="max-w-3xl mx-auto mt-10 p-4">
        <h2 class="text-2xl font-bold mb-3">How This 1099 Tax Calculator Works</h2>
        <p class="text-gray-700 leading-7">
            This 1099 Tax Calculator is designed to give freelancers, gig workers, and contractors a clear
            understanding of how much tax they owe. When you earn money on a 1099 form, taxes are not automatically
            withheld, meaning you must calculate and pay them yourself. This tool simplifies that process. First, you
            enter your total income for the year. Then, you add your deductible expenses, which reduce your taxable
            income. The calculator automatically applies the 2025 federal tax brackets and the self-employment tax rate,
            which includes both Social Security and Medicare. Since freelancers pay both the employer and employee
            portion, the SE tax is higher than what traditional employees pay.
            <br><br>
            If you turn on the state tax toggle, the calculator instantly retrieves your stateâ€™s estimated 2025 tax
            rate. Because every state is different, this feature lets you view accurate totals without manually looking
            up tax tables. Another useful feature is the voice input button. Instead of typing, you can simply speak
            your income and deductions using your deviceâ€™s microphone. This is especially helpful on mobile devices.
            <br><br>
            The receipt scanner allows you to upload expense receipts. Using Tesseract.js, the tool extracts numbers
            from your image and uses them as your deduction amount. This makes tracking expenses far easier. If you
            select that you missed the IRS filing deadline, the penalty counter activates. It displays a live
            real-time estimate of how much penalty you may be accumulating.
            <br><br>
            After processing your inputs, the calculator provides a clean summary showing federal tax, SE tax,
            optional state tax, and your final total tax owed. This clear explanation helps you avoid surprises and plan
            better for quarterly payments. Whether you're a freelancer or small business owner, this calculator provides
            everything you need in one place.
        </p>
    </div>

    <!-- JAVASCRIPT -->
    <script>
        // ---------------------
        // STATE TAX DATA
        // ---------------------
        const stateTaxes = {
            "California": 0.093,
            "Texas": 0,
            "Florida": 0,
            "New York": 0.062,
            "Washington": 0,
            "Nevada": 0,
            "Arizona": 0.025,
            "Oregon": 0.075,
            "Illinois": 0.049,
            "Georgia": 0.054,
            "Michigan": 0.0425,
            "Ohio": 0.03,
            "Pennsylvania": 0.0307,
            "Colorado": 0.044,
            "Virginia": 0.0575,
            "Massachusetts": 0.05
        };

        const stateSelect = document.getElementById("stateSelect");
        for (let state in stateTaxes) {
            let opt = document.createElement("option");
            opt.value = state;
            opt.textContent = state;
            stateSelect.appendChild(opt);
        }

        // ---------------------
        // VOICE INPUT
        // ---------------------
        function startVoice() {
            const rec = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            rec.lang = "en-US";
            rec.start();
            rec.onresult = function (e) {
                document.getElementById("income").value = e.results[0][0].transcript.replace(/\D/g, "");
            };
        }

        // ---------------------
        // RECEIPT OCR
        // ---------------------
        async function scanReceipt() {
            const file = document.getElementById("receipt").files[0];
            if (!file) return;

            const { data: { text } } = await Tesseract.recognize(file, "eng");
            const number = text.match(/\d+/);

            if (number) {
                document.getElementById("deductions").value = number[0];
            }
        }

        // ---------------------
        // PENALTY TIMER
        // ---------------------
        let penaltyTimer;
        let penaltyAmount = 0;

        function togglePenalty() {
            const show = document.getElementById("penaltySelect").value === "yes";
            const counter = document.getElementById("penaltyCounter");

            if (show) {
                counter.classList.remove("hidden");
                penaltyTimer = setInterval(() => {
                    penaltyAmount += 0.50 / 60;
                    document.getElementById("penaltyAmount").textContent = penaltyAmount.toFixed(2);
                }, 1000);
            } else {
                clearInterval(penaltyTimer);
                penaltyAmount = 0;
                counter.classList.add("hidden");
            }
        }

        // ---------------------
        // MAIN TAX CALCULATION
        // ---------------------
        function calculateTax() {
            const income = Number(document.getElementById("income").value);
            const deductions = Number(document.getElementById("deductions").value);
            const state = document.getElementById("stateSelect").value;

            if (!income) return alert("Please enter income.");

            const taxable = Math.max(0, income - deductions);

            // Federal tax (simple flat est)
            const federalTax = taxable * 0.22;

            // SE Tax 15.3%
            const seTax = taxable * 0.153;

            // State tax
            const stateTax = state ? taxable * stateTaxes[state] : 0;

            const total = federalTax + seTax + stateTax;

            document.getElementById("resultCard").classList.remove("hidden");
            document.getElementById("resultText").innerHTML = `
                <strong>Taxable Income:</strong> $${taxable.toLocaleString()} <br>
                <strong>Federal Tax:</strong> $${federalTax.toLocaleString()} <br>
                <strong>Self-Employment Tax:</strong> $${seTax.toLocaleString()} <br>
                <strong>State Tax:</strong> $${stateTax.toLocaleString()} <br>
                <hr class="my-2">
                <strong>Total Estimated Tax:</strong> $${total.toLocaleString()}
            `;
        }
    </script>
</body>
</html>
